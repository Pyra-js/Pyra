// src/routes/dashboard/middleware.ts
async function dashboardMiddleware(context, next) {
  const authToken = context.cookies.get("auth_token");
  if (!authToken) {
    return context.redirect("/login", 302);
  }
  const response = await next();
  const headers = new Headers(response.headers);
  headers.set("X-Dashboard-Middleware", "true");
  return new Response(response.body, {
    status: response.status,
    statusText: response.statusText,
    headers
  });
}
export {
  dashboardMiddleware as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL3JvdXRlcy9kYXNoYm9hcmQvbWlkZGxld2FyZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gRGFzaGJvYXJkIG1pZGRsZXdhcmUgXHUyMDE0IGNoZWNrcyBmb3IgYXV0aCBjb29raWUsIHJlZGlyZWN0cyBpZiBtaXNzaW5nXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGRhc2hib2FyZE1pZGRsZXdhcmUoY29udGV4dCwgbmV4dCkge1xyXG4gIGNvbnN0IGF1dGhUb2tlbiA9IGNvbnRleHQuY29va2llcy5nZXQoXCJhdXRoX3Rva2VuXCIpO1xyXG4gIGlmICghYXV0aFRva2VuKSB7XHJcbiAgICByZXR1cm4gY29udGV4dC5yZWRpcmVjdChcIi9sb2dpblwiLCAzMDIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBuZXh0KCk7XHJcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xyXG4gIGhlYWRlcnMuc2V0KFwiWC1EYXNoYm9hcmQtTWlkZGxld2FyZVwiLCBcInRydWVcIik7XHJcbiAgcmV0dXJuIG5ldyBSZXNwb25zZShyZXNwb25zZS5ib2R5LCB7XHJcbiAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcclxuICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXHJcbiAgICBoZWFkZXJzLFxyXG4gIH0pO1xyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFDQSxlQUFPLG9CQUEyQyxTQUFTLE1BQU07QUFDL0QsUUFBTSxZQUFZLFFBQVEsUUFBUSxJQUFJLFlBQVk7QUFDbEQsTUFBSSxDQUFDLFdBQVc7QUFDZCxXQUFPLFFBQVEsU0FBUyxVQUFVLEdBQUc7QUFBQSxFQUN2QztBQUVBLFFBQU0sV0FBVyxNQUFNLEtBQUs7QUFDNUIsUUFBTSxVQUFVLElBQUksUUFBUSxTQUFTLE9BQU87QUFDNUMsVUFBUSxJQUFJLDBCQUEwQixNQUFNO0FBQzVDLFNBQU8sSUFBSSxTQUFTLFNBQVMsTUFBTTtBQUFBLElBQ2pDLFFBQVEsU0FBUztBQUFBLElBQ2pCLFlBQVksU0FBUztBQUFBLElBQ3JCO0FBQUEsRUFDRixDQUFDO0FBQ0g7IiwKICAibmFtZXMiOiBbXQp9Cg==
